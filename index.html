<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SINTAX LLC — Creative Music & Media</title>
  <meta name="description" content="SINTAX LLC: Music. Art. Theory. Prolonging perception."/>
  <!-- Encode inline SVG to avoid any accidental parser quirks -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3ES%3C/text%3E%3C/svg%3E">

  <style>
    :root{
      --y:#ffff00;               /* neon yellow */
      --bg:#000;                 /* CRT black */
      --mono:'Courier New',monospace;
      --glass:rgba(0,0,0,.55);
      --white:#fff;
    }

    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--y);
      font-family:var(--mono); overflow:hidden; position:relative;
    }

    /* CRT scanlines + subtle glow */
    body::before{
      content:''; position:absolute; inset:0;
      background:repeating-linear-gradient(to bottom,
        rgba(255,255,0,.03) 0, rgba(255,255,0,.05) 2px, transparent 3px);
      pointer-events:none; z-index:1;
    }
    body::after{
      content:''; position:absolute; inset:0;
      background:radial-gradient(circle at center, rgba(255,255,255,.02), transparent 70%);
      animation:flicker .15s infinite; pointer-events:none; z-index:2;
    }
    @keyframes flicker{0%,100%{opacity:1}50%{opacity:.85}}

    /* ---------- INTRO / LOADER ---------- */
    #loaderSection{min-height:100vh; display:grid; place-items:center; padding:24px; position:relative}
    .col{width:100%; max-width:820px; display:flex; flex-direction:column; align-items:center; z-index:10}
    h1.loading{
      font-size:clamp(32px,6.5vw,88px); margin:24px 0 16px; text-align:center;
      animation:glitch 1.5s infinite, flicker .2s infinite;
      text-shadow:0 0 2px var(--y), 0 0 10px var(--y), 0 0 20px #ff0, 0 0 40px #ff0;
    }
    @keyframes glitch{
      0%{transform:translate(0)}10%{transform:translate(-2px,-2px)}20%{transform:translate(2px,2px)}
      30%{transform:translate(-1px,2px)}40%{transform:translate(2px,-1px)}50%{transform:translate(-2px,1px)}
      60%{transform:translate(1px,-2px)}70%{transform:translate(-2px,-2px)}80%{transform:translate(2px,2px)}
      90%{transform:translate(1px,-1px)}100%{transform:translate(0)}
    }
    .loader-container{
      width:90%; max-width:600px; height:30px; margin-bottom:18px;
      background:rgba(255,255,0,.08); border:2px solid var(--y);
      display:flex; align-items:center; padding:2px; box-shadow:0 0 10px var(--y);
    }
    .loader-block{width:10%; height:100%; background:transparent; border:1px solid var(--y); box-shadow:inset 0 0 5px var(--y); transition:background-color .2s}
    .loader-block.filled{background:var(--y)}
    #asteroidsCanvas{display:none; background:transparent; border:2px solid var(--y); box-shadow:0 0 15px var(--y); margin-top:16px}
    #scoreDisplay{display:none; font-size:1.05rem; margin-top:8px; text-shadow:0 0 8px var(--y)}
    @media (min-width:601px){ #asteroidsCanvas,#scoreDisplay{display:block} }

    #static-overlay{
      position:fixed; inset:0; pointer-events:none; z-index:6;
      background-image:url('https://media.giphy.com/media/oEI9uBYSzLpBK/giphy.gif');
      background-size:cover; mix-blend-mode:screen; opacity:.08;
    }

    .enter-wrap{margin-top:18px; cursor:pointer; user-select:none; text-align:center}
    .enter-text{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Arial Black',Impact,sans-serif;
      font-weight:900; letter-spacing:.14em; font-size:clamp(36px,7.2vw,120px);
      color:transparent; -webkit-text-stroke:4px var(--y); text-stroke:4px var(--y);
      filter:drop-shadow(0 0 6px rgba(255,255,0,.9)) drop-shadow(0 0 18px rgba(255,255,0,.5));
      animation:pulse 1.6s ease-in-out infinite;
    }
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.04)}}
    .enter-hint{margin-top:6px; font-size:.95rem; opacity:.9; text-shadow:0 0 6px var(--y)}
    .hidden{display:none !important}

    /* ---------- MAIN / CANVAS LAYERS ---------- */
    #main{
      opacity:0; pointer-events:none; transition:opacity 1s ease;
      min-height:100vh; overflow:hidden; color:var(--white); background:transparent;
    }
    /* fullscreen canvas: behind UI, above CRT layers */
    #tron{
      position:fixed; inset:0;
      width:100vw; height:100vh;    /* ensure visual coverage */
      z-index:3;
      background:transparent;
      image-rendering:pixelated;
      pointer-events:none;
    }

    .top-row{
      position:fixed; top:18px; left:18px; right:18px;
      display:flex; justify-content:space-between; align-items:center; gap:12px;
      z-index:5;
    }
    .pill{
      background:rgba(17,17,17,.75); backdrop-filter: blur(8px);
      color:#f5f7fa; border:1px solid rgba(255,255,255,.12);
      border-radius:12px; padding:10px 16px; font-weight:600; letter-spacing:.02em;
      box-shadow:0 8px 24px rgba(0,0,0,.25);
      cursor:default;
    }
    .clickable{cursor:pointer}
    .menu{display:inline-grid; grid-template-columns:repeat(3,8px); gap:6px; padding:10px 14px}
    .dot{width:8px; height:8px; background:#e5e7eb; border-radius:2px}

    .caption{
      position:fixed; left:18px; bottom:12vh; z-index:5;
      max-width:min(80vw,780px);
      background:var(--glass); color:#fff; border-radius:8px;
      border:1px solid rgba(255,255,255,.18);
      padding:10px 14px; font-size:clamp(18px,2.6vw,28px); line-height:1.15;
      box-shadow:0 10px 30px rgba(0,0,0,.35);
      opacity:0; transform:translateY(12px); transition:opacity .45s ease, transform .45s ease;
    }
    .caption.show{opacity:1; transform:none}

    /* ---------- ABOUT OVERLAY ---------- */
    #aboutOverlay{
      position:fixed; inset:0; z-index:7; display:none;
      background:rgba(0,0,0,.6);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      animation:fadeIn .35s ease forwards;
    }
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}

    #aboutPanel{
      position:relative; margin:6vh auto 4vh; width:min(92vw, 980px);
      border:1px solid rgba(255,255,0,.25);
      background:linear-gradient(180deg, rgba(0,0,0,.85), rgba(0,0,0,.7));
      color:#fff; border-radius:14px; box-shadow:0 0 22px rgba(255,255,0,.15), 0 14px 40px rgba(0,0,0,.6);
      overflow:hidden;
    }
    .aboutHeader{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 18px; border-bottom:1px solid rgba(255,255,0,.2);
      background:rgba(17,17,17,.8);
    }
    .aboutTitle{
      font-size:clamp(18px,2.2vw,28px); font-weight:800; letter-spacing:.06em;
      color:var(--y); text-shadow:0 0 8px rgba(255,255,0,.5);
    }
    .aboutClose{
      background:transparent; border:1px solid rgba(255,255,0,.6);
      color:var(--y); border-radius:8px; padding:6px 10px; cursor:pointer;
      font-weight:700; letter-spacing:.06em; text-shadow:0 0 6px rgba(255,255,0,.3);
    }
    .aboutBody{
      padding:18px; max-height:70vh; overflow:auto; line-height:1.35;
      scrollbar-width:thin; scrollbar-color: var(--y) rgba(255,255,0,.1);
    }
    .aboutBody h2{
      margin:0 0 10px; font-size:clamp(22px,3vw,34px);
      text-shadow:0 0 10px var(--y);
    }
    .aboutBody p{margin:10px 0 14px; color:#eaeaea}
    .aboutBody em{color:var(--y)}

    /* focus ring for a11y */
    .focus-ring:focus{outline:2px dashed var(--y); outline-offset:2px}

    /* small helpers */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>

  <!-- ---------- INTRO ---------- -->
  <section id="loaderSection">
    <div class="col" role="region" aria-label="CRT Loading Screen">
      <h1 class="loading">LOADING...</h1>
      <div class="loader-container" id="loader"></div>

      <canvas id="asteroidsCanvas" width="600" height="380" aria-hidden="true"></canvas>
      <div id="scoreDisplay">Score: <span id="score">0</span></div>

      <div class="enter-wrap" id="enterWrap" tabindex="0" role="button" aria-label="Enter site">
        <div class="enter-text">ENTER</div>
        <div class="enter-hint">Press Enter ⏎ or click</div>
      </div>
    </div>

    <div id="static-overlay" aria-hidden="true"></div>
    <audio id="music-track" src="https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Komiku/Its_time_for_adventure_/Komiku_-_07_-_Level_5_-_Boss.mp3" preload="auto" loop></audio>
  </section>

  <!-- ---------- MAIN ---------- -->
  <main id="main" role="main" aria-label="SINTAX landing">
    <canvas id="tron"></canvas>

    <div class="top-row">
      <div class="pill" aria-label="brand">SINTAX<sup>®</sup></div>
      <div style="display:flex; gap:10px; align-items:center">
        <button id="aboutBtn" class="pill clickable focus-ring" aria-haspopup="dialog" aria-controls="aboutOverlay" aria-expanded="false">ABOUT</button>
        <div class="pill menu" aria-label="menu">
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        </div>
      </div>
    </div>

    <div id="cap" class="caption">Music. Art. Theory. Prolonging Perception</div>
  </main>

  <!-- ---------- ABOUT OVERLAY / PANEL ---------- -->
  <div id="aboutOverlay" role="dialog" aria-modal="true" aria-labelledby="aboutHeading" aria-describedby="aboutContent">
    <div id="aboutPanel">
      <div class="aboutHeader">
        <div class="aboutTitle">ABOUT</div>
        <button id="aboutClose" class="aboutClose focus-ring" aria-label="Close About">CLOSE ✕</button>
      </div>
      <div class="aboutBody" id="aboutContent">
        <h2 id="aboutHeading">About SINTAX LLC</h2>
        <p>SINTAX LLC is a multidisciplinary creative house built at the intersection of <em>music, art, and technology</em>. Founded by <strong>Jaison Mathew</strong>, SINTAX represents a new generation of creators who blur the line between sound, image, and innovation.</p>
        <p>From <strong>audio engineering, mixing, and songwriting</strong> to <strong>photography, visual direction, and AI consulting</strong>, SINTAX operates as a hub where ideas take form — where art isn’t just produced, but <em>crafted with purpose and perception</em>.</p>
        <p>Jaison currently serves as <strong>Studio Manager at Mic Vision Studios</strong> in Garnerville, New York — a full-service production space just 30 minutes north of NYC.</p>
        <p>At its core, SINTAX is about connection — between mediums, between creators, and between the analog and digital worlds.<br><strong>Music. Art. Theory. Prolonging Perception.</strong></p>
      </div>
    </div>
  </div>

  <script>
    /* ------------ Loader blocks ------------ */
    const loader = document.getElementById('loader');
    const blockCount=10, mid=Math.floor(blockCount/2), fillSpeed=250;
    let current=0, direction=1;
    const blocks=[];
    for(let i=0;i<blockCount;i++){const b=document.createElement('div'); b.className='loader-block'; loader.appendChild(b); blocks.push(b);}    
    function animateLoop(){blocks.forEach((b,i)=>b.classList.toggle('filled', i<=current)); current+=direction; if(current===mid||current===0) direction*=-1;}
    const animTimer=setInterval(animateLoop, fillSpeed);

    /* ------------ Mini Asteroids (desktop only) ------------ */
    const canvasMini=document.getElementById('asteroidsCanvas');
    const ctxMini=canvasMini.getContext('2d');
    const music=document.getElementById('music-track');
    let ship={x:300,y:190,angle:0}, asteroids=[], keys={}, score=0;
    function spawnAsteroid(){return{x:Math.random()*canvasMini.width,y:Math.random()*canvasMini.height,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2}}
    for(let i=0;i<5;i++) asteroids.push(spawnAsteroid());
    document.addEventListener('keydown',e=>keys[e.key]=true);
    document.addEventListener('keyup',e=>keys[e.key]=false);
    function drawShip(){ctxMini.save();ctxMini.translate(ship.x,ship.y);ctxMini.rotate(ship.angle);
      ctxMini.beginPath();ctxMini.moveTo(10,0);ctxMini.lineTo(-10,-6);ctxMini.lineTo(-10,6);ctxMini.closePath();
      ctxMini.strokeStyle='yellow';ctxMini.stroke();ctxMini.restore();}
    function drawAsteroids(){ctxMini.strokeStyle='yellow'; asteroids.forEach(a=>{ctxMini.beginPath();ctxMini.arc(a.x,a.y,10,0,Math.PI*2);ctxMini.stroke()});}
    function updateMini(){
      if(keys['ArrowLeft']) ship.angle-=.05;
      if(keys['ArrowRight']) ship.angle+=.05;
      if(keys['ArrowUp']) { ship.x+=Math.cos(ship.angle)*2; ship.y+=Math.sin(ship.angle)*2; }
      asteroids.forEach(a=>{
        a.x+=a.dx; a.y+=a.dy;
        if(a.x<0)a.x=canvasMini.width; if(a.x>canvasMini.width)a.x=0;
        if(a.y<0)a.y=canvasMini.height; if(a.y>canvasMini.height)a.y=0;
        if(Math.hypot(a.x-ship.x,a.y-ship.y)<15){ score++; a.x=-999; }
      });
      const s=document.getElementById('score'); if(s) s.textContent=score;
    }
    function loopMini(){ctxMini.clearRect(0,0,canvasMini.width,canvasMini.height); updateMini(); drawShip(); drawAsteroids(); requestAnimationFrame(loopMini);}    
    if(matchMedia('(min-width: 601px)').matches){ music.volume=.14; music.play().catch(()=>{}); loopMini(); }

    /* ------------ ENTER → show main ------------ */
    const enterWrap=document.getElementById('enterWrap');
    function showMain(){
      clearInterval(animTimer);
      try{ music.pause(); music.currentTime=0; }catch(e){}
      document.getElementById('loaderSection').classList.add('hidden');
      const main=document.getElementById('main');
      main.style.opacity=1; main.style.pointerEvents='auto';
      document.body.style.overflow='auto';
      requestAnimationFrame(()=> document.getElementById('cap').classList.add('show'));
      initTron();
    }
    enterWrap.addEventListener('click', showMain);
    enterWrap.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); showMain(); } });

    /* ------------ TRON BIKES (1 yellow lone + 3 RGB formation) ------------ */
    function initTron(){
      const cvs = document.getElementById('tron');
      const ctx = cvs.getContext('2d', { alpha: true });

      // --- Pixel buffer scaling for chunky CRT look ---
      const PIX = 3; // internal pixel size
      function resize(){
        const w = Math.max(1, Math.floor(window.innerWidth  / PIX));
        const h = Math.max(1, Math.floor(window.innerHeight / PIX));
        cvs.width  = w;
        cvs.height = h;
        ctx.imageSmoothingEnabled = false;
        ctx.clearRect(0,0,w,h);
      }
      resize(); window.addEventListener('resize', resize);

      // --- Colors ---
      const YELLOW = '#ffff00'; // lone ranger
      const RED    = '#ff0000';
      const GREEN  = '#00ff00';
      const BLUE   = '#0000ff';

      // --- Trail parameters ---
      const FADE_ALPHA = 0.18;   // higher = shorter trail
      const TRAIL_BLUR = 10;
      const BIKE_BLUR  = 18;

      const lerp = (a,b,t)=>a+(b-a)*t;
      const wrap = (v,max)=> (v<0? v+max : (v>=max? v-max : v));

      // --- Grid (subtle) ---
      function drawGrid(){
        const w=cvs.width,h=cvs.height; ctx.save(); ctx.globalAlpha=0.06; ctx.strokeStyle='#444'; ctx.lineWidth=1;
        const step=Math.max(8, Math.floor(24/PIX));
        for(let gx=0; gx<w; gx+=step){ ctx.beginPath(); ctx.moveTo(gx,0); ctx.lineTo(gx,h); ctx.stroke(); }
        for(let gy=0; gy<h; gy+=step){ ctx.beginPath(); ctx.moveTo(0,gy); ctx.lineTo(w,gy); ctx.stroke(); }
        ctx.restore();
      }

      // --- Bikes ---
      const lone = { // yellow: roams independently
        x: Math.floor(cvs.width*0.18),
        y: Math.floor(cvs.height*0.55),
        angle: 0,
        speed: 0.95,
        steer: 0,
        targetSteer: 0,
        color: YELLOW
      };

      const group = { // RGB formation leader (GREEN center)
        x: Math.floor(cvs.width*0.68),
        y: Math.floor(cvs.height*0.4),
        angle: 0.0,
        speed: 0.92,
        spacing: 10 // lateral pixel offset between bikes
      };

      let t=0; // time counter

      function drawBikePixel(x,y,color,headDx,headDy){
        ctx.save();
        ctx.globalCompositeOperation='lighter';
        ctx.shadowColor=color; ctx.shadowBlur=TRAIL_BLUR; ctx.fillStyle=color;
        ctx.fillRect(Math.floor(x), Math.floor(y), 1, 1); // trail pixel
        ctx.shadowBlur=BIKE_BLUR;
        ctx.fillRect(Math.floor(x), Math.floor(y), 2, 2); // body
        ctx.fillRect(Math.floor(x+headDx), Math.floor(y+headDy), 1, 1); // headlight
        ctx.restore();
      }

      function step(){
        const w=cvs.width,h=cvs.height;

        // Fade the canvas for trails
        ctx.save(); ctx.globalCompositeOperation='source-over'; ctx.globalAlpha=FADE_ALPHA; ctx.fillStyle='#000'; ctx.fillRect(0,0,w,h); ctx.restore();

        // Grid overlay
        drawGrid();

        // --- Update lone (yellow) with gentle random wander ---
        if (Math.random() < 0.02) { lone.targetSteer = (Math.random()*2 - 1) * 0.012; }
        lone.steer = lerp(lone.steer, lone.targetSteer, 0.03);
        lone.angle += lone.steer;
        lone.x += Math.cos(lone.angle) * lone.speed;
        lone.y += Math.sin(lone.angle) * lone.speed;
        lone.x = wrap(lone.x,w); lone.y = wrap(lone.y,h);

        // --- Update RGB formation (moves side-by-side) ---
        // Leader follows a smooth sine-steered path
        const baseSteer = 0.004 * Math.sin(t*0.02);
        group.angle = (group.angle||0) + baseSteer;
        group.x += Math.cos(group.angle) * group.speed;
        group.y += Math.sin(group.angle) * group.speed;
        group.x = wrap(group.x,w); group.y = wrap(group.y,h);

        // Compute lateral normal for side-by-side offsets
        const nx = -Math.sin(group.angle);
        const ny =  Math.cos(group.angle);
        const s  = group.spacing;

        // Positions: RED (left), GREEN (center), BLUE (right)
        const green = { x: group.x,        y: group.y,        color: GREEN };
        const red   = { x: group.x - s*1.5*nx, y: group.y - s*1.5*ny, color: RED   };
        const blue  = { x: group.x + s*1.5*nx, y: group.y + s*1.5*ny, color: BLUE  };

        // Wrap offsets too (edge continuity)
        red.x=wrap(red.x,w); red.y=wrap(red.y,h);
        green.x=wrap(green.x,w); green.y=wrap(green.y,h);
        blue.x=wrap(blue.x,w); blue.y=wrap(blue.y,h);

        // --- Draw all bikes ---
        const all = [
          {x:lone.x,y:lone.y,angle:lone.angle,color:YELLOW},
          {x:red.x,y:red.y,angle:group.angle,color:RED},
          {x:green.x,y:green.y,angle:group.angle,color:GREEN},
          {x:blue.x,y:blue.y,angle:group.angle,color:BLUE}
        ];
        for(const b of all){
          const hx = Math.round(Math.cos(b.angle));
          const hy = Math.round(Math.sin(b.angle));
          drawBikePixel(b.x,b.y,b.color,hx,hy);
        }

        t++;
        requestAnimationFrame(step);
      }

      step();
    }

    /* ------------ ABOUT TOGGLING ------------ */
    const aboutBtn   = document.getElementById('aboutBtn');
    const aboutClose = document.getElementById('aboutClose');
    const aboutOV    = document.getElementById('aboutOverlay');

    function openAbout(){
      aboutOV.style.display = 'block';
      document.body.style.overflow = 'hidden';
      aboutBtn.setAttribute('aria-expanded','true');
      // move focus to dialog for a11y
      aboutClose.focus();
    }

    function closeAbout(){
      aboutOV.style.display = 'none';
      document.body.style.overflow = 'auto';
      aboutBtn.setAttribute('aria-expanded','false');
      aboutBtn.focus();
    }

    aboutBtn.addEventListener('click', openAbout);
    aboutClose.addEventListener('click', closeAbout);

    // close on backdrop click
    aboutOV.addEventListener('click', (e)=>{ if(e.target === aboutOV) closeAbout(); });

    // keyboard shortcuts
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && aboutOV.style.display === 'block') closeAbout();
      if((e.key === 'Enter' || e.key === ' ') && document.activeElement === aboutBtn){ e.preventDefault(); openAbout(); }
    });

    /* --------------------------
       Minimal runtime tests
       (logs to console; no UI impact)
    ---------------------------*/
    function assert(cond, msg){ if(!cond){ console.error('❌ Test failed:', msg); throw new Error(msg); } else { console.log('✅', msg);} }

    // Test 1: canvas initializes after ENTER
    (function testCanvasInit(){
      const beforeW = document.getElementById('tron').width;
      // simulate showing main (without waiting for user)
      // NOTE: We don't call showMain() automatically to preserve UX.
      // Instead, verify function presence.
      assert(typeof initTron === 'function', 'initTron() exists');
    })();

    // Test 2: About dialog toggle
    (function testAboutToggle(){
      openAbout();
      assert(aboutOV.style.display === 'block', 'About opens');
      closeAbout();
      assert(aboutOV.style.display === 'none', 'About closes');
    })();

  </script>
</body>
</html>
